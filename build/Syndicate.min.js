b4w.register("Syndicate_main",function(A,a){function B(a,c){c?k.load(e+"Syndicate.json",C,null):console.log("b4w init failure")}function C(a){D();E();q.enable_camera_controls()}function w(a){a=f.get_all_objects("ALL",a);for(var c=0;c<a.length;c++){var b=a[c];if(r.has_physics(b)){r.enable_simulation(b);var g=d.create_collision_sensor(b,"Details"),v=d.create_selection_sensor(b,!0);b==n&&d.set_custom_sensor(v,1);d.create_sensor_manifold(b,"COLLISION",d.CT_CONTINUOUS,[g,v],F,G);(g=t.get_parent(b))&&t.is_armature(g)?
p.set_translation_v(g,x):p.set_translation_v(b,x)}t.is_mesh(b)&&f.show_object(b)}}function F(a){return a[1]}function G(a,c,b){1==b&&(d.get_sensor_value(a,c,0)?f.set_outline_color(H):f.set_outline_color(I))}function E(){document.getElementById("controls-container").style.display="block";J();console.log("Init_controls");document.getElementById("load-1").addEventListener("click",function(a){k.load(e+"Pocket.json",w,null,null,!0)});document.getElementById("load-2").addEventListener("click",function(a){k.load(e+
"Button.json",w,null,null,!0)});document.getElementById("delete").addEventListener("click",function(a){n&&(a=f.get_object_data_id(n),k.unload(a),n=null)})}function J(){for(var a=["delete"],c=0;c<a.length;c++){var b=a[c];document.getElementById(b).addEventListener("mousedown",function(a){a.target.parentNode.classList.add("active")});document.getElementById(b).addEventListener("mouseup",function(a){a.target.parentNode.classList.remove("active")});document.getElementById(b).addEventListener("touchstart",
function(a){a.target.parentNode.classList.add("active")});document.getElementById(b).addEventListener("touchend",function(a){a.target.parentNode.classList.remove("active")})}}function D(){var a=new Float32Array(3),c=u.create_pline(),b=new Float32Array(3),g=!1,m=l.create(),d=l.create(),k=y.create(),n=function(a,b,c,f,e,g){l.set_trans(e,m);y.rotationTo(K.AXIS_Z,g,k);p.set_rotation_v(h,k);l.set_quat(k,m);c&&L.is_animated(c)&&(p.get_tsr(c,d),l.invert(d,d),l.multiply(d,m,m),a=l.get_trans_view(m),b=l.get_quat_view(m),
M.append_stiff(h,c,a,b));p.set_tsr(h,m)},e=N.get_container();e.addEventListener("mousedown",function(a){h=f.pick_object(a.clientX,a.clientY);g=!0;h&&q.disable_camera_controls();console.log(h);console.log(g)},!1);e.addEventListener("mouseup",function(a){h=null},!1);e.addEventListener("mousemove",function(d){if(h){var e=d.clientX;d=d.clientY;q.enable_camera_controls();O.calc_ray(f.get_active_camera(),e,d,c);u.get_pline_directional_vec(c,b);console.log(h);P.scale(b,100,b);e=f.get_active_camera();r.append_ray_test_ext(e,
a,b,"ANY",n,!0,!1,!0,!0)}},!1)}var L=a("animation"),M=a("constraints"),y=a("quat"),P=a("vec3"),O=a("camera"),d=a("controls"),u=a("math"),t=a("objects"),r=a("physics"),Q=a("version"),q=a("app"),R=a("config"),k=a("data");a("preloader");a("version");a("mouse");var f=a("scenes"),p=a("transform"),N=a("container"),l=a("tsr"),K=a("util"),n=null,I=[0,1,0],H=[1,0,0];new Float32Array(2);var x=new Float32Array(3);new Float32Array(3);new Float32Array(3);new Float32Array(3);new Float32Array(4);u.create_pline();
var h=null,z="DEBUG"===Q.type(),e=R.get_assets_path("Syndicate");A.init=function(){q.init({autoresize:!0,callback:B,canvas_container_id:"main_canvas_container",physics_enabled:!0,show_fps:!0,assets_dds_available:!z,assets_min50_available:!z,console_verbose:!0})}});b4w.require("Syndicate_main").init();
